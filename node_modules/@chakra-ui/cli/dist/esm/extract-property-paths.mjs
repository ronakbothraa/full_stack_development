import { isObject } from './utils/is-object.mjs';
import { printUnionType } from './utils/print-union-type.mjs';

function printUnionMap(unions, strict = false) {
  return Object.entries(unions).sort(([a], [b]) => a.localeCompare(b)).map(([targetKey, union]) => {
    const isStrict = typeof strict === "function" ? strict(targetKey) : strict;
    return `${targetKey}: ${printUnionType(union, isStrict)};`;
  }).join("\n");
}
function extractPropertyPaths(target, maxDepth = 3) {
  if (!isObject(target) && !Array.isArray(target) || !maxDepth) {
    return [];
  }
  return Object.entries(target).reduce((allPropertyPaths, [key, value]) => {
    if (isObject(value)) {
      extractPropertyPaths(value, maxDepth - 1).forEach(
        (childKey) => (
          // e.g. gray.500
          allPropertyPaths.push(`${key}.${childKey}`)
        )
      );
    } else {
      allPropertyPaths.push(key);
    }
    return allPropertyPaths;
  }, []);
}

export { extractPropertyPaths, printUnionMap };
